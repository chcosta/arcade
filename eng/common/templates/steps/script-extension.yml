parameters:
  agentOs: Windows_NT
  script: ''
  name: ''
  displayName: ''
  env: ''

steps:
- script: ${{ parameters.script }}
  name: $${{ parameters.name }}
  ${{ if eq(parameters.displayName, '') }}:
    displayName: ${{ parameters.name }}
  ${{ if ne(parameters.displayName, '') }}:
    displayName: ${{ parameters.displayName }}
    
  ${{ if eq(parameters.agentOs, 'Windows_NT') }}:
    env:
      scriptExtension: cmd
      ${{ insert }}: ${{ parameters.env }}
    name: ${{ parameters.name }}
  ${{ if not(eq(parameters.agentOs, 'Windows_NT')) }}:
    env:
      scriptExtension: sh
      ${{ insert }}: ${{ parameters.variables }}