parameters:
  agentOs: 'Windows_NT'
  phase: {}

phases:
- phase: ${{ parameters.agentOs }}
  queue: ${{ parameters.phase.queue }}
  steps:
  - checkout: self
    clean: true
    fetchDepth: 5
  - ${{ parameters.phase.steps }}
  # Windows variables
  ${{ if eq(parameters.agentOs, 'Windows_NT') }}:
    variables:
      scriptExtension: cmd
      engCommonDirectory: eng\common\
      ${{ insert }}: ${{ parameters.phase.variables }}
  # Unix variables
  ${{ if not(eq(parameters.agentOs, 'Windows_NT')) }}:
    variables:
      scriptExtension: sh
      engCommonDirectory: eng/common/
      ${{ insert }}: ${{ parameters.phase.variables }}
