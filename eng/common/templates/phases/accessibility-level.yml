# accessibility-level.yml
# Description: Defines phase variables which are dependent on the build reason.  ie CI, PR, Official build
# Parameters:
#   agentOs: [Windows_NT, Linux, OSX] Used in templates to define variables which are OS specific
#   officialBuildId: Currently used to define an official build (TODO: fix this)
#   matrix: build matrix
#   queueName: agent pool name
parameters:
  phase: {}

phases:
  - template: /eng/common/templates/phases/os-specific.yml
    parameters:
      phase:
        agentOs: ${{ parameters.phase.agentOs }}
        queue: ${{ parameters.phase.queue }}
        steps: ${{ parameters.phase.steps }}
        ${{ if eq(parameters.phase..officialBuildId, '') }}:
          variables:
            AdditionalBuildArgs: 'hi'
            ${{ insert }}: ${{ parameters.phase.variables }}
        ${{ if not(eq(parameters.phase.officialBuildId, '')) }}:
          variables:
            dotnetfeed-storage-access-key-1: ''
            AdditionalBuildArgs: /p:PB_PublishBlobFeedKey=$(dotnetfeed-storage-access-key-1)
              /p:PB_PublishBlobFeedUrl=$(_PublishBlobFeedUrl)
              /p:PB_PublishType=$(publishType)
              /p:SignType=$(_SignType)
            ${{ insert }}: ${{ parameters.phase.variables }}
